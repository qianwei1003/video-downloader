@startuml
title MCP 服务架构图

' 核心功能区域
package "核心功能" {
  package "视频内容采集" {
    [平台识别]
    [平台适配器抽象层] --> [基础适配器基类]
    [平台识别] --> [平台适配器抽象层]
  }
  package "批量下载管理" {
    [下载任务管理器]
    [并发控制与断点续传]
  }
  package "内容处理与转换" {
    [格式转换模块]
    [清晰度选择与处理]
    [字幕提取模块]
    [音频分离与合并]
    [关键帧提取与元数据解析]
  }
}

' 数据源集成
package "数据源集成" {
  [视频平台API适配器] 
  [通用解析引擎]
}

' 内容筛选与组织
package "内容筛选与组织" {
  [筛选规则与策略]
  [数据集构建]
}

' 技术架构
package "技术架构" {
  [Node.js + TypeScript 架构]
  [服务端分层设计]
  [分布式下载引擎]
  [存储系统]
}

' 系统接口
package "系统接口" {
  [内容检索API]
  [批量下载与实时采集接口]
  [管理接口]
}

' 可扩展设计
package "可扩展设计" {
  [平台适配器扩展]
  [处理器插件系统]
  [插件注册机制] "（预留抖音/哔哩哔哩等）"
  [配置驱动扩展]
}

' 工程实践与安全提升
package "工程实践" {
  [领域驱动设计]
  [代码组织与规范]
  [自动化测试与CI/CD]
  [性能与可靠性监控]
  [基础MCP客户端连接器]
}

' 模块之间的关联
[平台适配器抽象层] --> [平台适配器扩展] : 插件机制预留
[基础适配器基类] --> [视频平台API适配器]
[自动化测试与CI/CD] ..> [领域驱动设计]
[基础MCP客户端连接器] ..> [系统接口] : MCP 预集成

@enduml
